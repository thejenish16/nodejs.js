<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Title -->
    <title>Dashboard | AdminHub - Graindashboard UI Kit</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/graindashboard.css">
</head>

<body class="has-sidebar has-fixed-sidebar-and-header">
<!-- Header -->
<header class="header bg-body">
    <nav class="navbar flex-nowrap p-0">
        <div class="navbar-brand-wrapper d-flex align-items-center col-auto">
            <!-- Logo For Mobile View -->
            <a class="navbar-brand navbar-brand-mobile" href="/dashboard">
                <i class="fas fa-shield-alt text-primary" style="font-size: 2rem;"></i>
            </a>
            <!-- End Logo For Mobile View -->

            <!-- Logo For Desktop View -->
            <a class="navbar-brand navbar-brand-desktop d-flex align-items-center" href="/dashboard">
                <i class="fas fa-shield-alt text-primary me-2" style="font-size: 2rem;"></i>
                <span class="fw-bold text-primary fs-4">AdminHub</span>
            </a>
            <!-- End Logo For Desktop View -->
        </div>

        <div class="header-content col px-md-3">
            <div class="d-flex align-items-center">
                <!-- Side Nav Toggle -->
                <a class="js-side-nav header-invoker d-flex me-md-2" href="#"
                    data-bs-toggle="offcanvas" data-bs-target="#sidebar">
                    <i class="fas fa-bars"></i>
                </a>
                <!-- End Side Nav Toggle -->

                <!-- User Notifications -->
                <div class="dropdown ms-auto">
                    <a id="notificationsInvoker" class="header-invoker" href="#" data-bs-toggle="dropdown">
                        <span class="position-relative">
                            <i class="fas fa-bell"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                3
                            </span>
                        </span>
                    </a>

                    <div class="dropdown-menu dropdown-menu-end p-0 mt-2" style="width: 300px;">
                        <div class="card border-0">
                            <div class="card-header d-flex align-items-center border-bottom py-3">
                                <h5 class="mb-0">Notifications</h5>
                                <a class="link-primary small ms-auto" href="#">Clear All</a>
                            </div>

                            <div class="card-body p-0">
                                <div class="list-group list-group-flush">
                                    <div class="list-group-item list-group-item-action">
                                        <div class="d-flex align-items-center text-nowrap mb-2">
                                            <i class="fas fa-info-circle text-primary me-2"></i>
                                            <h6 class="fw-semibold mb-0">New Update</h6>
                                            <span class="text-muted ms-auto small">just now</span>
                                        </div>
                                        <p class="mb-0 small">
                                            New admin <strong><%= allAdmin && allAdmin.length > 0 ? allAdmin[0].fname : 'User' %></strong> has been added.
                                        </p>
                                    </div>
                                    <div class="list-group-item list-group-item-action">
                                        <div class="d-flex align-items-center text-nowrap mb-2">
                                            <i class="fas fa-user-plus text-success me-2"></i>
                                            <h6 class="fw-semibold mb-0">User Registration</h6>
                                            <span class="text-muted ms-auto small">2h ago</span>
                                        </div>
                                        <p class="mb-0 small">
                                            System backup completed successfully.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End User Notifications -->
                
                <!-- User Avatar -->
                <div class="dropdown mx-3">
                    <a id="profileMenuInvoker" class="header-complex-invoker d-flex align-items-center" href="#" data-bs-toggle="dropdown">
                        <% if (typeof admin !== 'undefined' && admin && admin.profile_image) { %>
                            <img class="avatar rounded-circle me-md-2" src="/<%= admin.profile_image %>" alt="<%= admin.fname %>" style="width: 40px; height: 40px;">
                        <% } else { %>
                            <span class="me-md-2 avatar-placeholder bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <%= typeof admin !== 'undefined' && admin ? admin.fname.charAt(0) : 'A' %>
                            </span>
                        <% } %>
                        <span class="d-none d-md-block">
                            <%= typeof admin !== 'undefined' && admin ? admin.fname + ' ' + admin.lname : 'Admin User' %>
                        </span>
                        <i class="fas fa-chevron-down d-none d-md-block ms-2"></i>
                    </a>

                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <a class="dropdown-item d-flex align-items-center" href="/profile">
                                <i class="fas fa-user me-3"></i>
                                My Profile
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item d-flex align-items-center" href="/logout">
                                <i class="fas fa-sign-out-alt me-3"></i>
                                Sign Out
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- End User Avatar -->
            </div>
        </div>
    </nav>
</header>
<!-- End Header -->

<main class="main">
    <!-- Sidebar Nav -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body p-0">
            <aside class="side-nav">
                <ul class="side-nav-menu mb-0">
                    <!-- Title -->
                    <li class="sidebar-heading h6 text-muted px-3 py-2">Dashboard</li>
                    <!-- End Title -->

                    <!-- Dashboard -->
                    <li class="side-nav-menu-item">
                        <a class="side-nav-menu-link d-flex align-items-center py-2 px-3 active" href="/dashboard">
                            <i class="fas fa-tachometer-alt me-3"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <!-- End Dashboard -->

                    <!-- Title -->
                    <li class="sidebar-heading h6 text-muted px-3 py-2 mt-3">Management</li>
                    <!-- End Title -->

                    <!-- Users -->
                    <li class="side-nav-menu-item">
                        <a class="side-nav-menu-link d-flex align-items-center py-2 px-3" href="#" data-bs-toggle="collapse" data-bs-target="#subUsers">
                            <i class="fas fa-users me-3"></i>
                            <span>Admins</span>
                            <i class="fas fa-chevron-right ms-auto"></i>
                        </a>
                        <div class="collapse" id="subUsers">
                            <ul class="side-nav-menu ps-4">
                                <li class="side-nav-menu-item">
                                    <a class="side-nav-menu-link py-1 px-3" href="/viewAdmin">All Admins</a>
                                </li>
                                <li class="side-nav-menu-item">
                                    <a class="side-nav-menu-link py-1 px-3" href="/addAdmin">Add New</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <!-- End Users -->

                    <!-- Profile -->
                    <li class="side-nav-menu-item">
                        <a class="side-nav-menu-link d-flex align-items-center py-2 px-3" href="/profile">
                            <i class="fas fa-user-circle me-3"></i>
                            <span>My Profile</span>
                        </a>
                    </li>
                    <!-- End Profile -->

                    <!-- Settings -->
                    <li class="side-nav-menu-item">
                        <a class="side-nav-menu-link d-flex align-items-center py-2 px-3" href="#">
                            <i class="fas fa-cog me-3"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    <!-- End Settings -->
                </ul>
            </aside>
        </div>
    </div>
    <!-- End Sidebar Nav -->

    <div class="content">
        <div class="py-4 px-3 px-md-4">

            <div class="mb-3 mb-md-4 d-flex justify-content-between">
                <div class="h3 mb-0">Dashboard</div>
            </div>

            <!-- Stats Cards Row -->
            <div class="row">
                <div class="col-md-6 col-xl-4 mb-3 mb-md-4">
                    <!-- Card -->
                    <div class="card h-100">
                        <div class="card-header d-flex">
                            <h5 class="h6 fw-semibold text-uppercase mb-0">Total Admins</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="d-flex align-items-center px-3 px-md-4 mb-3 mb-md-4">
                                <div class="flex-grow-1">
                                    <h4 class="h3 lh-1 mb-2"><%= allAdmin ? allAdmin.length : 0 %></h4>
                                    <p class="small text-muted mb-0">
                                        +<%= allAdmin ? Math.floor(allAdmin.length * 0.1) : 0 %> <span class="text-success mx-1">+12.5%</span> This Month
                                    </p>
                                </div>
                                <div class="text-primary">
                                    <i class="fas fa-users fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Card -->
                </div>
                
                <div class="col-md-6 col-xl-4 mb-3 mb-md-4">
                    <!-- Card -->
                    <div class="card h-100">
                        <div class="card-header d-flex">
                            <h5 class="h6 fw-semibold text-uppercase mb-0">Active Users</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="d-flex align-items-center px-3 px-md-4 mb-3 mb-md-4">
                                <div class="flex-grow-1">
                                    <h4 class="h3 lh-1 mb-2"><%= allAdmin ? Math.floor(allAdmin.length * 0.85) : 0 %></h4>
                                    <p class="small text-muted mb-0">
                                        +<%= allAdmin ? Math.floor(allAdmin.length * 0.05) : 0 %> <span class="text-success mx-1">+8.3%</span> This Week
                                    </p>
                                </div>
                                <div class="text-success">
                                    <i class="fas fa-user-check fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Card -->
                </div>
                
                <div class="col-md-6 col-xl-4 mb-3 mb-md-4">
                    <!-- Card -->
                    <div class="card h-100">
                        <div class="card-header d-flex">
                            <h5 class="h6 fw-semibold text-uppercase mb-0">System Health</h5>
                        </div>
                        <div class="card-body pt-0">
                            <h4 class="h2 lh-1 mb-2 text-success">98.5%</h4>
                            <p class="mb-3 mb-md-4">System Status</p>
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <strong class="d-block mb-3">Performance</strong>
                                    <div class="d-flex align-items-center text-muted mb-2">
                                        <span class="badge bg-success rounded-circle me-2" style="width: 12px; height: 12px;"></span>
                                        <small>Server</small>
                                    </div>
                                    <div class="d-flex align-items-center text-muted">
                                        <span class="badge bg-primary rounded-circle me-2" style="width: 12px; height: 12px;"></span>
                                        <small>Database</small>
                                    </div>
                                </div>
                                <div class="text-warning">
                                    <i class="fas fa-chart-line fa-3x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Card -->
                </div>
            </div>

            <!-- Widget Cards Row -->
            <div class="row">
                <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
                    <!-- Widget -->
                    <div class="card d-flex flex-row align-items-center p-3 p-md-4">
                        <div class="icon-circle bg-primary bg-opacity-10 rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <i class="fas fa-chart-bar text-primary fs-4"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h4 class="lh-1 mb-1">75%</h4>
                            <h6 class="mb-0">Conversion Rate</h6>
                        </div>
                        <i class="fas fa-arrow-up text-success"></i>
                    </div>
                    <!-- End Widget -->
                </div>

                <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
                    <!-- Widget -->
                    <div class="card d-flex flex-row align-items-center p-3 p-md-4">
                        <div class="icon-circle bg-secondary bg-opacity-10 rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <i class="fas fa-wallet text-secondary fs-4"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h4 class="lh-1 mb-1">$18,000.00</h4>
                            <h6 class="mb-0">Total Sales</h6>
                        </div>
                        <i class="fas fa-arrow-down text-danger"></i>
                    </div>
                    <!-- End Widget -->
                </div>

                <div class="col-md-6 col-xl-4 mb-3 mb-xl-4">
                    <!-- Widget -->
                    <div class="card d-flex flex-row align-items-center p-3 p-md-4">
                        <div class="icon-circle bg-warning bg-opacity-10 rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <i class="fas fa-dollar-sign text-warning fs-4"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h4 class="lh-1 mb-1">$10,000.00</h4>
                            <h6 class="mb-0">Net Revenue</h6>
                        </div>
                        <i class="fas fa-arrow-up text-success"></i>
                    </div>
                    <!-- End Widget -->
                </div>
            </div>

            <!-- Charts and Tables Row -->
            <div class="row">
                <div class="col-12">
                    <!-- Card -->
                    <div class="card mb-3 mb-md-4">
                        <div class="card-header border-bottom p-0">
                            <ul class="nav nav-tabs nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active d-flex align-items-center py-3 px-4" href="#overview" role="tab" data-bs-toggle="tab">
                                        <span>Overview</span>
                                        <small class="text-muted ms-auto">$12,012.96</small>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link d-flex align-items-center py-3 px-4" href="#analytics" role="tab" data-bs-toggle="tab">
                                        <span>Analytics</span>
                                        <small class="text-muted ms-auto">$8,038.00</small>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link d-flex align-items-center py-3 px-4" href="#reports" role="tab" data-bs-toggle="tab">
                                        <span>Reports</span>
                                        <small class="text-muted ms-auto">$19,234.23</small>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body tab-content">
                            <div class="tab-pane fade show active" id="overview" role="tabpanel">
                                <div class="row text-center mb-4">
                                    <div class="col-6 col-md-4 mb-3 mb-md-0">
                                        <div class="h3 mb-0">
                                            $12,012<sup class="h5">.96</sup>
                                        </div>
                                        <small class="text-muted">Total Sales</small>
                                    </div>

                                    <div class="col-6 col-md-4 mb-3 mb-md-0 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-success">+</span>$1,059<sup class="h5">.83</sup>
                                        </div>
                                        <small class="text-muted">Today Sales (USD)</small>
                                    </div>

                                    <div class="col-12 col-md-4 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-success">+</span>5.32<sup class="h5">%</sup>
                                        </div>
                                        <small class="text-muted">Net Profit (%)</small>
                                    </div>
                                </div>

                                <!-- Chart Placeholder -->
                                <div class="chart-placeholder bg-light rounded p-5 text-center">
                                    <i class="fas fa-chart-area fa-3x text-muted mb-3"></i>
                                    <p class="text-muted">Chart visualization would appear here</p>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="analytics" role="tabpanel">
                                <div class="row text-center mb-4">
                                    <div class="col-6 col-md-4 mb-3 mb-md-0">
                                        <div class="h3 mb-0">
                                            $8,038<sup class="h5">.00</sup>
                                        </div>
                                        <small class="text-muted">Total Sales</small>
                                    </div>

                                    <div class="col-6 col-md-4 mb-3 mb-md-0 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-success">+</span>$105<sup class="h5">.84</sup>
                                        </div>
                                        <small class="text-muted">Today Sales (USD)</small>
                                    </div>

                                    <div class="col-12 col-md-4 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-danger">-</span>2.38<sup class="h5">%</sup>
                                        </div>
                                        <small class="text-muted">Net Profit (%)</small>
                                    </div>
                                </div>

                                <!-- Chart Placeholder -->
                                <div class="chart-placeholder bg-light rounded p-5 text-center">
                                    <i class="fas fa-chart-line fa-3x text-muted mb-3"></i>
                                    <p class="text-muted">Analytics chart would appear here</p>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="reports" role="tabpanel">
                                <div class="row text-center mb-4">
                                    <div class="col-6 col-md-4 mb-3 mb-md-0">
                                        <div class="h3 mb-0">
                                            $19,234<sup class="h5">.23</sup>
                                        </div>
                                        <small class="text-muted">Total Sales</small>
                                    </div>

                                    <div class="col-6 col-md-4 mb-3 mb-md-0 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-success">+</span>$2,732<sup class="h5">.24</sup>
                                        </div>
                                        <small class="text-muted">Today Sales (USD)</small>
                                    </div>

                                    <div class="col-12 col-md-4 border-start">
                                        <div class="h3 mb-0">
                                            <span class="text-success">+</span>15.78<sup class="h5">%</sup>
                                        </div>
                                        <small class="text-muted">Net Profit (%)</small>
                                    </div>
                                </div>

                                <!-- Chart Placeholder -->
                                <div class="chart-placeholder bg-light rounded p-5 text-center">
                                    <i class="fas fa-chart-pie fa-3x text-muted mb-3"></i>
                                    <p class="text-muted">Reports chart would appear here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Card -->
                </div>
            </div>

            <!-- Recent Orders Table -->
            <div class="row">
                <div class="col-12">
                    <div class="card mb-3 mb-md-4">
                        <div class="card-header">
                            <h5 class="fw-semibold mb-0">Recent Admins</h5>
                        </div>

                        <div class="card-body pt-0">
                            <div class="table-responsive">
                                <table class="table text-nowrap mb-0">
                                    <thead>
                                    <tr>
                                        <th class="fw-semibold border-top-0 py-2">#</th>
                                        <th class="fw-semibold border-top-0 py-2">Admin</th>
                                        <th class="fw-semibold border-top-0 py-2">Email</th>
                                        <th class="fw-semibold border-top-0 py-2">City</th>
                                        <th class="fw-semibold border-top-0 py-2">Gender</th>
                                        <th class="fw-semibold border-top-0 py-2">Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <% if (allAdmin && allAdmin.length > 0) { %>
                                        <% allAdmin.slice(0, 7).forEach((admin, index) => { %>
                                        <tr>
                                            <td class="py-3"><%= index + 1 %></td>
                                            <td class="py-3">
                                                <div class="d-flex align-items-center">
                                                    <img class="avatar rounded-circle me-2" src="/<%= admin.profile_image %>" alt="<%= admin.fname %>" style="width: 40px; height: 40px;" onerror="this.src='https://ui-avatars.com/api/?name=<%= admin.fname %>+<%= admin.lname %>&background=007bff&color=fff'">
                                                    <div>
                                                        <div><%= admin.fname %> <%= admin.lname %></div>
                                                        <div class="text-muted small">Administrator</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3"><%= admin.email %></td>
                                            <td class="py-3"><%= admin.city %></td>
                                            <td class="py-3">
                                                <span class="badge bg-<%= admin.gender === 'Male' ? 'primary' : admin.gender === 'Female' ? 'danger' : 'warning' %>">
                                                    <%= admin.gender %>
                                                </span>
                                            </td>
                                            <td class="py-3">
                                                <div class="dropdown">
                                                    <a class="text-dark" href="#" data-bs-toggle="dropdown">
                                                        <i class="fas fa-ellipsis-v"></i>
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li>
                                                            <a class="dropdown-item d-flex align-items-center" href="/editAdmin/<%= admin._id %>">
                                                                <i class="fas fa-edit me-2"></i>
                                                                Edit
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a class="dropdown-item d-flex align-items-center text-danger" href="/deleteAdmin/<%= admin._id %>">
                                                                <i class="fas fa-trash me-2"></i>
                                                                Delete
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                        </tr>
                                        <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="6" class="text-center py-4">
                                                <i class="fas fa-users fa-3x text-muted mb-3"></i>
                                                <p class="text-muted">No admins found</p>
                                                <a href="/addAdmin" class="btn btn-primary">Add First Admin</a>
                                            </td>
                                        </tr>
                                    <% } %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <footer class="small p-3 px-md-4 mt-auto bg-light">
            <div class="row justify-content-between">
                <div class="col-lg text-center text-lg-start mb-3 mb-lg-0">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item me-3"><a class="text-dark text-decoration-none" href="#">FAQ</a></li>
                        <li class="list-inline-item me-3"><a class="text-dark text-decoration-none" href="#">Support</a></li>
                        <li class="list-inline-item me-3"><a class="text-dark text-decoration-none" href="#">Contact us</a></li>
                    </ul>
                </div>

                <div class="col-lg text-center mb-3 mb-lg-0">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item mx-2"><a class="text-muted" href="#"><i class="fab fa-twitter"></i></a></li>
                        <li class="list-inline-item mx-2"><a class="text-muted" href="#"><i class="fab fa-facebook"></i></a></li>
                        <li class="list-inline-item mx-2"><a class="text-muted" href="#"><i class="fab fa-github"></i></a></li>
                    </ul>
                </div>

                <div class="col-lg text-center text-lg-end">
                    &copy; 2024 AdminHub. All Rights Reserved.
                </div>
            </div>
        </footer>
        <!-- End Footer -->
    </div>
</main>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Mobile sidebar toggle
document.addEventListener('DOMContentLoaded', function() {
    const sidebarToggle = document.querySelector('.js-side-nav');
    const sidebar = document.querySelector('#sidebar');
    
    if (sidebarToggle && sidebar) {
        sidebarToggle.addEventListener('click', function(e) {
            e.preventDefault();
            const bsOffcanvas = new bootstrap.Offcanvas(sidebar);
            bsOffcanvas.toggle();
        });
    }
});
</script>
</body>
</html>