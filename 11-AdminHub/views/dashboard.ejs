<%- include('header') %>

<div class="page-header fade-in">
    <h1 class="page-title">Dashboard Overview</h1>
    <p class="page-subtitle">Welcome to your modern admin control center</p>
</div>

<!-- Enhanced Stats Cards -->
<div class="grid grid-4 mb-3">
    <div class="stat-card fade-in" style="animation-delay: 0.1s; border-left-color: var(--primary);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                <i class="fas fa-users"></i>
            </div>
            <div style="text-align: right;">
                <div class="stat-number"><%= allAdmin ? allAdmin.length : 0 %></div>
                <div class="stat-label">Total Admins</div>
            </div>
        </div>
        <div style="font-size: 12px; color: var(--success); font-weight: 600;">
            <i class="fas fa-arrow-up"></i> +12% from last month
        </div>
    </div>
    
    <div class="stat-card fade-in" style="animation-delay: 0.2s; border-left-color: var(--success);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--success), #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                <i class="fas fa-user-check"></i>
            </div>
            <div style="text-align: right;">
                <div class="stat-number" style="color: var(--success);"><%= allAdmin ? Math.floor(allAdmin.length * 0.85) : 0 %></div>
                <div class="stat-label">Active Users</div>
            </div>
        </div>
        <div style="font-size: 12px; color: var(--success); font-weight: 600;">
            <i class="fas fa-arrow-up"></i> +8% this week
        </div>
    </div>
    
    <div class="stat-card fade-in" style="animation-delay: 0.3s; border-left-color: var(--warning);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--warning), #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                <i class="fas fa-user-plus"></i>
            </div>
            <div style="text-align: right;">
                <div class="stat-number" style="color: var(--warning);"><%= allAdmin ? Math.floor(allAdmin.length * 0.15) : 0 %></div>
                <div class="stat-label">New This Month</div>
            </div>
        </div>
        <div style="font-size: 12px; color: var(--warning); font-weight: 600;">
            <i class="fas fa-arrow-up"></i> +25% growth
        </div>
    </div>
    
    <div class="stat-card fade-in" style="animation-delay: 0.4s; border-left-color: var(--danger);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--danger), #dc2626); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                <i class="fas fa-chart-line"></i>
            </div>
            <div style="text-align: right;">
                <div class="stat-number" style="color: var(--danger);">98.5%</div>
                <div class="stat-label">System Health</div>
            </div>
        </div>
        <div style="font-size: 12px; color: var(--success); font-weight: 600;">
            <i class="fas fa-check-circle"></i> Excellent
        </div>
    </div>
</div>

<!-- Quick Actions Section -->
<div class="card mb-3 fade-in" style="animation-delay: 0.5s;">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-bolt"></i>
            Quick Actions
        </h3>
    </div>
    <div class="card-body">
        <div class="grid grid-3">
            <a href="/addAdmin" class="btn btn-primary" style="padding: 24px; text-align: center; flex-direction: column; gap: 12px; border-radius: var(--radius-lg);">
                <div style="width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                    <i class="fas fa-user-plus" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div style="font-weight: 700; font-size: 16px;">Add Administrator</div>
                    <div style="font-size: 12px; opacity: 0.8;">Create new admin account</div>
                </div>
            </a>
            
            <a href="/viewAdmin" class="btn btn-success" style="padding: 24px; text-align: center; flex-direction: column; gap: 12px; border-radius: var(--radius-lg);">
                <div style="width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                    <i class="fas fa-users" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div style="font-weight: 700; font-size: 16px;">View All Admins</div>
                    <div style="font-size: 12px; opacity: 0.8;">Manage admin accounts</div>
                </div>
            </a>
            
            <a href="/profile" class="btn btn-warning" style="padding: 24px; text-align: center; flex-direction: column; gap: 12px; border-radius: var(--radius-lg);">
                <div style="width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                    <i class="fas fa-user-circle" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div style="font-weight: 700; font-size: 16px;">My Profile</div>
                    <div style="font-size: 12px; opacity: 0.8;">Update your profile</div>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- Recent Admins Section -->
<div class="card fade-in" style="animation-delay: 0.6s;">
    <div class="card-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 class="card-title">
                <i class="fas fa-crown"></i>
                Recent Administrators
            </h3>
            <% if (allAdmin && allAdmin.length > 5) { %>
                <a href="/viewAdmin" style="color: var(--primary); text-decoration: none; font-weight: 600; font-size: 14px;">
                    View All (<%= allAdmin.length %>) <i class="fas fa-arrow-right"></i>
                </a>
            <% } %>
        </div>
    </div>
    <div class="card-body">
        <% if (allAdmin && allAdmin.length > 0) { %>
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Administrator</th>
                            <th>Contact</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% allAdmin.slice(0, 5).forEach((user, index) => { %>
                        <tr style="animation: fadeInUp 0.6s ease-out; animation-delay: <%= (index + 1) * 0.1 %>s; animation-fill-mode: both;">
                            <td>
                                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; box-shadow: var(--shadow);">
                                    #<%= index + 1 %>
                                </div>
                            </td>
                            <td>
                                <div class="flex items-center gap-2">
                                    <img src="/<%= user.profile_image %>" alt="<%= user.fname %>" class="avatar" 
                                         onerror="this.src='https://ui-avatars.com/api/?name=<%= user.fname %>+<%= user.lname %>&background=6366f1&color=fff&size=50'">
                                    <div>
                                        <div style="font-weight: 700; color: var(--dark); font-size: 16px;"><%= user.fname %> <%= user.lname %></div>
                                        <div style="color: var(--gray); font-size: 12px; font-weight: 500;">
                                            <i class="fas fa-shield-alt" style="color: var(--warning); margin-right: 4px;"></i>
                                            Administrator
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div style="color: var(--gray); font-weight: 500;">
                                    <i class="fas fa-envelope" style="color: var(--primary); margin-right: 8px;"></i>
                                    <%= user.email %>
                                </div>
                            </td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <i class="fas fa-map-marker-alt" style="color: var(--warning);"></i>
                                    <span style="font-weight: 600; color: var(--dark);"><%= user.city %></span>
                                </div>
                            </td>
                            <td>
                                <span class="badge badge-<%= user.gender === 'Male' ? 'primary' : user.gender === 'Female' ? 'danger' : 'warning' %>">
                                    <i class="fas fa-<%= user.gender === 'Male' ? 'mars' : user.gender === 'Female' ? 'venus' : 'genderless' %>"></i>
                                    <%= user.gender %>
                                </span>
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <a href="/editAdmin/<%= user._id %>" class="btn btn-warning" style="padding: 8px 12px; font-size: 12px; font-weight: 600;">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a href="/deleteAdmin/<%= user._id %>" class="btn btn-danger" style="padding: 8px 12px; font-size: 12px; font-weight: 600;" 
                                       onclick="return confirm('Are you sure you want to delete this admin?')">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <div class="text-center p-2">
                <div style="width: 120px; height: 120px; background: rgba(99, 102, 241, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 32px;">
                    <i class="fas fa-users" style="font-size: 48px; color: var(--primary);"></i>
                </div>
                <h3 style="color: var(--dark); margin-bottom: 16px; font-weight: 800; font-size: 24px;">No Administrators Found</h3>
                <p style="color: var(--gray); margin-bottom: 32px; font-size: 16px; font-weight: 500;">Get started by adding your first administrator to the system</p>
                <a href="/addAdmin" class="btn btn-primary" style="padding: 16px 32px; font-weight: 700; font-size: 16px;">
                    <i class="fas fa-user-plus"></i>
                    Add First Administrator
                </a>
            </div>
        <% } %>
    </div>
</div>

<%- include('footer') %>